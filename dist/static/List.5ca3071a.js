import{B as e}from"./BaseTable.10ddcea8.js";import{_ as l}from"./BaseDialog.vue_vue_type_style_index_0_lang.3abd6421.js";import{d as a,a as o,r as d,Z as u,a3 as t,o as m,b as r,f as n,e as s,w as p,u as f,g as i,F as c,y as b,E as _,i as V,D as v,G as y,_ as M,k as g}from"./index.a082be67.js";import{B as h}from"./BaseFilterBox.c57d6a05.js";import{u as U}from"./useMemberList.593f9597.js";const k={pageNum:1,pageSize:20},w=a("useActivitiyManagement",{state:()=>({list:[],listTotal:0,formModel:{},queryParams:{...k}}),getters:{},actions:{async getListAction(e={}){this.queryParams={...this.queryParams,...e}},async createAction(e={}){}}}),x=e=>(v("data-v-b098d4ae"),e=e(),y(),e),A={class:"table-box"},C={class:"table-top-box"},q=b("新增"),P=b("修改"),B=x((()=>n("i",{class:"el-icon-minus vhi"},null,-1))),z=b("删除"),L=["src"],j=M(o({__name:"Tables",setup(a){const o=d(),b=u({dname:[{required:!0,message:"请输入部门名称",trigger:"blur"}],dcode:[{required:!0,message:"请输入部门编码",trigger:"blur"}]}),v=w(),y=d(!1),M=d(!1);d(!1);const g=d(!1),h=d(!1),U=d(!1),k=d(!1),x=d(!1),j=d(""),S=async(e,l)=>{"page"===e&&v.getListAction({pageNum:l}),"size"===e&&v.getListAction({pageNum:1,pageSize:l})},F=(e,l)=>{j.value=URL.createObjectURL(l.raw)},N=e=>"image/jpeg"!==e.type?(_.error("Avatar picture must be JPG format!"),!1):!(e.size/1024/1024>2)||(_.error("Avatar picture size can not exceed 2MB!"),!1);t((()=>{v.getListAction()}));const G=[{label:"活动名称",prop:"systemName"},{label:"活动价格(元)",prop:"systemCode"},{label:"门市价(元)",prop:"name"},{label:"已售数量",prop:"name"},{label:"累计订单数",prop:"name"},{label:"累计订单金额(元)",prop:"name"},{label:"有效期",prop:"name"},{label:"使用时间",prop:"name"},{label:"显示顺序",prop:"name"},{label:"是否在首页显示",slot:"isShowHome"},{label:"是否砍价",slot:"isSale"},{label:"是否团购",slot:"isGroupBuy"},{label:"操作",slot:"action"}];return(a,d)=>{const u=V("el-button"),t=V("el-switch"),_=V("el-input"),w=V("el-form-item"),I=V("el-col"),O=V("el-date-picker"),T=V("el-time-picker"),R=V("Plus"),D=V("el-icon"),H=V("el-upload"),E=V("el-row"),J=V("el-form");return m(),r(c,null,[n("div",A,[n("div",C,[s(u,{type:"primary",onClick:d[0]||(d[0]=e=>(e=>{switch(e){case 0:y.value=!0;break;case 1:case 2:M.value=!0;break;case 3:g.value=!0;break;case 4:h.value=!0;break;case 5:U.value=!0;break;case 6:k.value=!0;break;case 7:x.value=!0}})(0))},{default:p((()=>[q])),_:1})]),s(e,{columns:G,"table-data":f(v).list,total:f(v).listTotal,"current-page":f(v).queryParams.pageNum,"page-size":f(v).queryParams.pageSize,"handle-change":S},{action:p((e=>[s(u,{style:{color:"#2c3cd8"},type:"text",onClick:l=>{e.row}},{default:p((()=>[P])),_:2},1032,["onClick"]),B,s(u,{style:{color:"#2c3cd8"},type:"text",onClick:l=>{e.row}},{default:p((()=>[z])),_:2},1032,["onClick"])])),isShowHome:p((e=>[s(t,{modelValue:e.delivery,"onUpdate:modelValue":l=>e.delivery=l},null,8,["modelValue","onUpdate:modelValue"])])),isSale:p((e=>[s(t,{modelValue:e.delivery,"onUpdate:modelValue":l=>e.delivery=l},null,8,["modelValue","onUpdate:modelValue"])])),isGroupBuy:p((e=>[s(t,{modelValue:e.delivery,"onUpdate:modelValue":l=>e.delivery=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["table-data","total","current-page","page-size"])]),s(l,{modelValue:y.value,"onUpdate:modelValue":d[22]||(d[22]=e=>y.value=e),w:"50%",title:"新增",onOnCancel:d[23]||(d[23]=e=>{var l;(l=o.value)&&(l.resetFields(),l.clearValidate(),v.formModel={})}),onOnOk:d[24]||(d[24]=e=>{var l;(l=o.value)&&l.validate(((e,l)=>{e&&v.createAction()}))})},{default:p((()=>[s(J,{ref_key:"ruleFormRef",ref:o,model:f(v).formModel,rules:b,"label-width":"100px"},{default:p((()=>[s(E,{gutter:16},{default:p((()=>[s(I,{span:12},{default:p((()=>[s(w,{label:"活动名称"},{default:p((()=>[s(_,{modelValue:f(v).formModel.name,"onUpdate:modelValue":d[1]||(d[1]=e=>f(v).formModel.name=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1}),s(I,{span:12},{default:p((()=>[s(w,{label:"活动价格(元)"},{default:p((()=>[s(_,{modelValue:f(v).formModel.name,"onUpdate:modelValue":d[2]||(d[2]=e=>f(v).formModel.name=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1}),s(I,{span:12},{default:p((()=>[s(w,{label:"门市价(元)"},{default:p((()=>[s(_,{modelValue:f(v).formModel.name,"onUpdate:modelValue":d[3]||(d[3]=e=>f(v).formModel.name=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1}),s(I,{span:12},{default:p((()=>[s(w,{label:"每人限购数量"},{default:p((()=>[s(_,{modelValue:f(v).formModel.name,"onUpdate:modelValue":d[4]||(d[4]=e=>f(v).formModel.name=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1}),s(I,{span:12},{default:p((()=>[s(w,{label:"开启砍价"},{default:p((()=>[s(t,{modelValue:f(v).formModel.delivery,"onUpdate:modelValue":d[5]||(d[5]=e=>f(v).formModel.delivery=e)},null,8,["modelValue"])])),_:1})])),_:1}),s(I,{span:12},{default:p((()=>[s(w,{label:"最低价格"},{default:p((()=>[s(_,{modelValue:f(v).formModel.name,"onUpdate:modelValue":d[6]||(d[6]=e=>f(v).formModel.name=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1}),s(I,{span:12},{default:p((()=>[s(w,{label:"砍价人数"},{default:p((()=>[s(_,{modelValue:f(v).formModel.name,"onUpdate:modelValue":d[7]||(d[7]=e=>f(v).formModel.name=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1}),s(I,{span:12},{default:p((()=>[s(w,{label:"商品数量"},{default:p((()=>[s(_,{modelValue:f(v).formModel.name,"onUpdate:modelValue":d[8]||(d[8]=e=>f(v).formModel.name=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1}),s(I,{span:12},{default:p((()=>[s(w,{label:"砍价截止时间"},{default:p((()=>[s(O,{modelValue:f(v).formModel.value1,"onUpdate:modelValue":d[9]||(d[9]=e=>f(v).formModel.value1=e),type:"datetimerange","range-separator":"至","start-placeholder":"开始","end-placeholder":"结束"},null,8,["modelValue"])])),_:1})])),_:1}),s(I,{span:12},{default:p((()=>[s(w,{label:"开启团购"},{default:p((()=>[s(t,{modelValue:f(v).formModel.delivery,"onUpdate:modelValue":d[10]||(d[10]=e=>f(v).formModel.delivery=e)},null,8,["modelValue"])])),_:1})])),_:1}),s(I,{span:12},{default:p((()=>[s(w,{label:"已售数量"},{default:p((()=>[s(_,{modelValue:f(v).formModel.name,"onUpdate:modelValue":d[11]||(d[11]=e=>f(v).formModel.name=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1}),s(I,{span:12},{default:p((()=>[s(w,{label:"截止时间"},{default:p((()=>[s(O,{modelValue:f(v).formModel.value1,"onUpdate:modelValue":d[12]||(d[12]=e=>f(v).formModel.value1=e),type:"datetimerange","range-separator":"至","start-placeholder":"开始","end-placeholder":"结束"},null,8,["modelValue"])])),_:1})])),_:1}),s(I,{span:24},{default:p((()=>[s(w,{label:"活动说明"},{default:p((()=>[s(_,{type:"textarea",modelValue:f(v).formModel.name,"onUpdate:modelValue":d[13]||(d[13]=e=>f(v).formModel.name=e),placeholder:""},null,8,["modelValue"])])),_:1})])),_:1}),s(I,{span:12},{default:p((()=>[s(w,{label:"预约信息（说明）"},{default:p((()=>[s(_,{modelValue:f(v).formModel.name,"onUpdate:modelValue":d[14]||(d[14]=e=>f(v).formModel.name=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1}),s(I,{span:12},{default:p((()=>[s(w,{label:"使用时间"},{default:p((()=>[s(_,{modelValue:f(v).formModel.name,"onUpdate:modelValue":d[15]||(d[15]=e=>f(v).formModel.name=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1}),s(I,{span:12},{default:p((()=>[s(w,{label:"适用人群"},{default:p((()=>[s(_,{modelValue:f(v).formModel.name,"onUpdate:modelValue":d[16]||(d[16]=e=>f(v).formModel.name=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1}),s(I,{span:12},{default:p((()=>[s(w,{label:"规则提醒"},{default:p((()=>[s(_,{modelValue:f(v).formModel.name,"onUpdate:modelValue":d[17]||(d[17]=e=>f(v).formModel.name=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1}),s(I,{span:12},{default:p((()=>[s(w,{label:"显示顺序"},{default:p((()=>[s(_,{modelValue:f(v).formModel.name,"onUpdate:modelValue":d[18]||(d[18]=e=>f(v).formModel.name=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1}),s(I,{span:12},{default:p((()=>[s(w,{label:"显示在首页"},{default:p((()=>[s(t,{modelValue:f(v).formModel.delivery,"onUpdate:modelValue":d[19]||(d[19]=e=>f(v).formModel.delivery=e)},null,8,["modelValue"])])),_:1})])),_:1}),s(I,{span:12},{default:p((()=>[s(w,{label:"验证开始时间"},{default:p((()=>[s(T,{modelValue:f(v).formModel.value1,"onUpdate:modelValue":d[20]||(d[20]=e=>f(v).formModel.value1=e),placeholder:"Arbitrary time"},null,8,["modelValue"])])),_:1})])),_:1}),s(I,{span:12},{default:p((()=>[s(w,{label:"验证结束时间"},{default:p((()=>[s(T,{modelValue:f(v).formModel.value1,"onUpdate:modelValue":d[21]||(d[21]=e=>f(v).formModel.value1=e),placeholder:"Arbitrary time"},null,8,["modelValue"])])),_:1})])),_:1}),s(I,{span:24},{default:p((()=>[s(w,{label:"活动图"},{default:p((()=>[s(H,{class:"avatar-uploader",action:"https://run.mocky.io/v3/9d059bf9-4660-45f2-925d-ce80ad6c4d15","show-file-list":!1,"on-success":F,"before-upload":N},{default:p((()=>[j.value?(m(),r("img",{key:0,src:j.value,class:"avatar"},null,8,L)):(m(),i(D,{key:1,class:"avatar-uploader-icon"},{default:p((()=>[s(R)])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])],64)}}}),[["__scopeId","data-v-b098d4ae"]]),S=M(o({__name:"Filter",setup(e){const l=U(),a=u({applicationCode:""}),o=d(null);return g((()=>l.queryParams.applicationCode),(e=>{l.queryParams.moduleCode="",a.applicationCode=e})),(e,a)=>{const d=V("el-input"),u=V("el-form-item"),t=V("el-form");return m(),i(h,null,{default:p((()=>[s(t,{class:"filter-form",ref_key:"formInstance",ref:o,inline:"",model:f(l).queryParams,"label-width":"80px","inline-message":""},{default:p((()=>[s(u,{label:"累计订单数"},{default:p((()=>[s(d,{disabled:""})])),_:1}),s(u,{label:"累计订单金额"},{default:p((()=>[s(d,{disabled:""})])),_:1}),s(u,{label:"待核销数"},{default:p((()=>[s(d,{disabled:""})])),_:1}),s(u,{label:"待核销金额"},{default:p((()=>[s(d,{disabled:""})])),_:1}),s(u,{label:"已核销数"},{default:p((()=>[s(d,{disabled:""})])),_:1}),s(u,{label:"已待核销金额"},{default:p((()=>[s(d,{disabled:""})])),_:1})])),_:1},8,["model"])])),_:1})}}}),[["__scopeId","data-v-6e5b1b3b"]]),F={class:"view-w"},N=M(o({__name:"List",setup:e=>(e,l)=>(m(),r("div",F,[s(S),s(j,{class:"my-table"})]))}),[["__scopeId","data-v-26d8f5b8"]]);export{N as default};
